{% extends "admin/operations/base_operations.html" %}
{% block title %}Financial - Operations - Purposefully Made KC{% endblock %}
{% block ops_content %}
<h1 class="ops-title">Financial Buckets</h1>
<p class="ops-subtitle">Revenue, COGS, profit, and expense tracking.</p>

<div class="ops-grid">
    <div class="ops-card ops-stat">
        <h3>Total Revenue</h3>
        <p class="stat-number">${{ "%.2f"|format(total_revenue) }}</p>
    </div>
    <div class="ops-card ops-stat">
        <h3>Total Profit</h3>
        <p class="stat-number profit">${{ "%.2f"|format(total_profit) }}</p>
    </div>
</div>

<div class="ops-card">
    <h2>Add Financial Entry</h2>
    <form method="POST" action="{{ url_for('admin.add_financial_entry') }}" class="ops-form-inline">
        <select name="category" required>
            <option value="revenue">Revenue</option>
            <option value="cogs">Cost of Goods</option>
            <option value="advertising">Advertising</option>
            <option value="equipment">Equipment</option>
            <option value="misc">Misc / Software</option>
        </select>
        <input type="number" name="amount" step="0.01" placeholder="Amount" required>
        <input type="text" name="description" placeholder="Description">
        <button type="submit" class="btn btn-primary">Add</button>
    </form>
</div>

<div class="ops-card">
    <h2>Recent Entries</h2>
    <table class="admin-table">
        <thead><tr><th>Date</th><th>Category</th><th>Amount</th><th>Description</th></tr></thead>
        <tbody>
            {% for e in entries %}
            <tr><td>{{ e.entry_date.strftime('%b %d, %Y') }}</td><td>{{ e.category }}</td>
                <td class="{{ 'positive' if e.amount > 0 else 'negative' }}">${{ "%.2f"|format(e.amount) }}</td><td>{{ e.description or '-' }}</td></tr>
            {% else %}<tr><td colspan="4" class="text-muted">No entries yet.</td></tr>{% endfor %}
        </tbody>
    </table>
</div>
<style>.ops-stat{text-align:center}.stat-number{font-size:2rem;font-weight:700}.profit{color:var(--success-color)}.positive{color:var(--success-color)}.negative{color:var(--error-color)}</style>
{% endblock %}
